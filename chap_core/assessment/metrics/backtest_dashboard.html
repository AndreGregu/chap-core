<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@5.20.1"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axis": {"labelFontSize": 11, "titleFontSize": 12}, "legend": {"labelFontSize": 11, "titleFontSize": 12}}, "vconcat": [{"mark": {"type": "text", "align": "left", "fontSize": 20, "fontWeight": "bold"}, "encoding": {"text": {"value": "Backtest-demo"}}, "height": 24}, {"mark": {"type": "text", "align": "left", "fontSize": 13}, "data": {"name": "metrics"}, "encoding": {"text": {"field": "summary"}}, "height": 30, "transform": [{"filter": {"param": "locSel"}}]}, {"mark": {"type": "text", "align": "left", "fontSize": 13}, "encoding": {"text": {"value": "Plott 1: Sammenlikner sannhet (gr\u00e5) med predikert (bl\u00e5). Plott 2: Antall samples hvor predikert > sannhet per uke."}}, "height": 20}, {"mark": {"type": "line", "point": true}, "data": {"name": "obs_fc"}, "encoding": {"color": {"field": "series", "legend": {"orient": "top-left"}, "scale": {"domain": ["disease_cases", "forecast_mean"], "range": ["#444", "#1f78b4"]}, "title": "", "type": "nominal"}, "tooltip": [{"field": "location", "type": "nominal"}, {"field": "time_period", "title": "Uke", "type": "nominal"}, {"field": "value", "format": ".2f", "title": "Verdi", "type": "quantitative"}, {"field": "series", "title": "Serie", "type": "nominal"}], "x": {"axis": {"labelAngle": 0}, "field": "week_index", "title": "Uke (indeks)", "type": "quantitative"}, "y": {"field": "value", "title": "Tilfeller / Prediksjon", "type": "quantitative"}}, "height": 220, "title": "Observasjoner vs. predikert (snitt over samples/horisonter)", "transform": [{"filter": {"param": "locSel"}}, {"fold": ["disease_cases", "forecast_mean"], "as": ["series", "value"]}], "width": 700}, {"mark": "bar", "data": {"name": "samples_above"}, "encoding": {"tooltip": [{"field": "location", "type": "nominal"}, {"field": "time_period", "title": "Uke", "type": "nominal"}, {"field": "metric", "title": "Antall samples > sannhet", "type": "quantitative"}], "x": {"axis": {"labelAngle": 0}, "field": "week_index", "title": "Uke (indeks)", "type": "quantitative"}, "y": {"field": "metric", "title": "Antall samples > sannhet", "type": "quantitative"}}, "height": 160, "title": "Samples over sannhet per uke", "transform": [{"filter": {"param": "locSel"}}], "width": 700}], "datasets": {"obs_fc": [{"location": "loc1", "time_period": "2023-W01", "forecast_mean": 10.0, "disease_cases": 11.0, "week_index": 109242}, {"location": "loc1", "time_period": "2023-W02", "forecast_mean": 12.0, "disease_cases": 13.0, "week_index": 109243}, {"location": "loc1", "time_period": "2023-W08", "forecast_mean": 16.0, "disease_cases": 15.0, "week_index": 109249}, {"location": "loc1", "time_period": "2023-W09", "forecast_mean": 19.0, "disease_cases": 18.0, "week_index": 109250}, {"location": "loc2", "time_period": "2023-W01", "forecast_mean": 21.0, "disease_cases": 19.0, "week_index": 109242}, {"location": "loc2", "time_period": "2023-W02", "forecast_mean": 23.0, "disease_cases": 21.0, "week_index": 109243}, {"location": "loc2", "time_period": "2023-W08", "forecast_mean": 6.0, "disease_cases": 25.0, "week_index": 109249}, {"location": "loc2", "time_period": "2023-W09", "forecast_mean": 9.0, "disease_cases": 30.0, "week_index": 109250}], "samples_above": [{"location": "loc1", "time_period": "2023-W01", "metric": 0, "week_index": 109242}, {"location": "loc1", "time_period": "2023-W02", "metric": 0, "week_index": 109243}, {"location": "loc1", "time_period": "2023-W08", "metric": 1, "week_index": 109249}, {"location": "loc1", "time_period": "2023-W09", "metric": 1, "week_index": 109250}, {"location": "loc2", "time_period": "2023-W01", "metric": 1, "week_index": 109242}, {"location": "loc2", "time_period": "2023-W02", "metric": 1, "week_index": 109243}, {"location": "loc2", "time_period": "2023-W08", "metric": 0, "week_index": 109249}, {"location": "loc2", "time_period": "2023-W09", "metric": 0, "week_index": 109250}], "metrics": [{"location": "loc1", "rmse": 1.0, "peak_value_diff": -1.0, "peak_week_lag": 0.0, "summary": "Lokasjon: loc1  |  RMSE: 1.00  |  Peak diff: -1.00  |  Peak lag (uker): 0"}, {"location": "loc2", "rmse": 14.230249470757707, "peak_value_diff": 7.0, "peak_week_lag": -7.0, "summary": "Lokasjon: loc2  |  RMSE: 14.23  |  Peak diff: 7.00  |  Peak lag (uker): -7"}]}, "params": [{"name": "locSel", "select": {"type": "point", "fields": ["location"]}, "bind": {"input": "select", "options": ["loc1", "loc2"], "name": "Lokasjon: "}, "views": []}], "$schema": "https://vega.github.io/schema/vega-lite/v5.json"};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>