<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Documentation for model developers" href="../external_models/index.html"><link rel="prev" title="Installing Chap Core for use with the Modeling app" href="installation.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Configure DHIS2 Modeling App and Chap Core to work together - Climate Health 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/_static/" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Climate Health 1.1.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">Climate Health 1.1.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Using Chap Core with DHIS2 Modeling App</a><input aria-label="Toggle navigation of Using Chap Core with DHIS2 Modeling App" checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installing Chap Core for use with the Modeling app</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Configure DHIS2 Modeling App and Chap Core to work together</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../external_models/index.html">Documentation for model developers</a><input aria-label="Toggle navigation of Documentation for model developers" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../external_models/chap-dhis2-connection.html">Chap’s native connection to DHIS2 and the DHIS2 Modelling App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/chap_evaluate_examples.html">Examples of chap evaluate commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/describe_model.html">Describing your model in our yaml-based format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/experienced_modeller.html">Documentation for experienced modellers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/newcomer.html">Introduction to principles of spatiotemporal modelling and streamlined implementation of models through Chap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/newcomer.html#to-be-updated-developing-your-own-custom-model-with-chap">(to be updated) Developing your own custom model with CHAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/running_models_in_chap.html">Running models through Chap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/running_models_in_chap.html#running-models-through-the-chap-command-line-interface">Running models through the Chap command-line interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/side_by_side_comparison.html">Evaluating your model side-by-side with a range of other models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/supporting_functionality.html">Chap’s broad range of supporting functionality for modelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/train_and_predict.html">Making chap-compatible train and predict endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_models/chapkit.html">Running models with chapkit</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../chap-cli/index.html">Using the CLI Tool</a><input aria-label="Toggle navigation of Using the CLI Tool" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../chap-cli/chap-core-cli-setup.html">Setting up CHAP-Core CLI Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chap-cli/earth-engine-auth.html">CHAP Core Credentials for Google Earth Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chap-cli/using-pa-with-cli.html">Use JSON-file from DHIS2 Modeling App with CHAP Core CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chap-cli/downloaded_json_data.html">Running on JSON Data Downloaded from the DHIS2 Modeling App</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contributor/index.html">Contributor guide</a><input aria-label="Toggle navigation of Contributor guide" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributor/getting_started.html">Contributor getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/chap-contributor-setup.html">Setting Up CHAP Core as a Contributor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/windows_contributors.html">Important note for Windows contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/code_overview.html">Code overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/vocabulary.html">Vocabulary (domain specific terms used in the code)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/testing.html">Testing while developing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/database_migrations.html">Database Migrations with Alembic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/writing_building_documentation.html">Writing and building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/r_docker_image.html">Creating a docker image for R models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributor/development_tools.html">Introduction to Development Tools</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../webapi/index.html">Chap REST API</a><input aria-label="Toggle navigation of Chap REST API" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../webapi/developer.html">Using Chap REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webapi/docker-compose-doc.html">Setting up Chap REST-API locally</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Releases and Future Plans</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/modeling-app/running-chap-on-server.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="configure-dhis2-modeling-app-and-chap-core-to-work-together">
<h1>Configure DHIS2 Modeling App and Chap Core to work together<a class="headerlink" href="#configure-dhis2-modeling-app-and-chap-core-to-work-together" title="Link to this heading">¶</a></h1>
<p><strong>Requirements:</strong></p>
<ul class="simple">
<li><p>Minimum DHIS2 version: <strong>2.40.7</strong></p></li>
<li><p>Access to a server running DHIS2</p></li>
</ul>
<p>The Modeling App is dependent on connecting to a Chap server, as running the models is a process that needs to be handled by Chap Core. In this tutorial, we will deploy Chap Core to the same server that DHIS2 is running on, and making the Chap Core REST API available internally to the DHIS2 backend. The Modeling App will then use the DHIS2 Route API to connect to the Chap Core endpoint. We will explain the purpose of the Route API later.</p>
<p><strong>IMPORTANT:</strong> We do not want to make the Chap Core endpoint publicly available on the internet, as Chap Core does not have any method of authenticating requests.</p>
<p><strong>NOTE:</strong> Previously, Chap Core required you to configure it with Google Earth Engine Credentials. This is not needed anymore, since the Modeling App is now using climate data imported into DHIS2 by the <a class="reference external" href="https://apps.dhis2.org/app/effb986c-a3c7-485e-a2f6-5e54ff9df7c3">DHIS2 Climate App</a>. Using the DHIS2 Climate App requires you to set up <a class="reference external" href="https://docs.dhis2.org/en/topics/tutorials/google-earth-engine-sign-up.html">DHIS2 with Google Earth Engine</a></p>
<section id="recommendation-around-containerization">
<h2>Recommendation around containerization<a class="headerlink" href="#recommendation-around-containerization" title="Link to this heading">¶</a></h2>
<p>We strongly recommend using Chap Core with a container framework such as LXC, where Chap Core runs in its own environment. Chap Core consists of several different services. In our <a class="reference external" href="https://github.com/dhis2-chap/chap-core">Chap Core repo</a>, we provide a <a class="reference external" href="https://github.com/dhis2-chap/chap-core/blob/master/compose.yml">docker-compose file</a> that containerizes each of these services and makes them work together. We highly recommend you use this docker-compose file when installing Chap Core, since installing each of these services could be very difficult without Docker.</p>
</section>
<section id="lxc-container-setup">
<h2>LXC container setup<a class="headerlink" href="#lxc-container-setup" title="Link to this heading">¶</a></h2>
<p>To run Chap Core on a server that is using LXC, you need to create a new LXC container dedicated to Chap Core. Within this LXC container, you then need to install Docker. Ubuntu has documentation on how to install Docker within an LXC container located at <a class="reference external" href="https://ubuntu.com/tutorials/how-to-run-docker-inside-lxd-containers#1-overview">https://ubuntu.com/tutorials/how-to-run-docker-inside-lxd-containers#1-overview</a></p>
<p>The Chap Core team has an example of a Chap Core LXC setup, which can be found at <a class="reference external" href="https://github.com/dhis2-chap/infrastructure">https://github.com/dhis2-chap/infrastructure</a>. Handle this code with care. The code is used to deploy Chap Core on a server for conducting integration testing. We recommend everyone only use this as an example and create their own bash script for deploying Chap Core within an LXC container.</p>
</section>
<section id="clone-the-chap-core-repo-into-your-lxc-container">
<h2>Clone the Chap Core repo into your LXC container<a class="headerlink" href="#clone-the-chap-core-repo-into-your-lxc-container" title="Link to this heading">¶</a></h2>
<p>Within your LXC container, you need to clone the Chap Core repo. Information about <strong>how to get</strong> and <strong>start Chap Core</strong>, is located at <a class="reference external" href="https://github.com/dhis2-chap/chap-core/releases/">https://github.com/dhis2-chap/chap-core/releases/</a></p>
<p>After you have started Chap Core, the Chap Core REST API will be available at port 8000.</p>
</section>
<section id="identify-the-chap-core-server-private-ip-address-and-verify-chap-core-is-running-properly">
<h2>Identify the Chap Core server private IP address and verify Chap Core is running properly<a class="headerlink" href="#identify-the-chap-core-server-private-ip-address-and-verify-chap-core-is-running-properly" title="Link to this heading">¶</a></h2>
<p>We now have Chap Core running in Docker within an LXC container dedicated to Chap Core. Next, you need to identify the private IP address (for instance 192.168.0.174) of the LXC container running Chap Core. This IP address is needed to get the DHIS2 Route API to work. <strong>Again, the IP address of Chap Core should not be exposed publicly, only internally on the server.</strong> If you are running with LXC, you could, for instance, use <strong>lxc list</strong> to locate this IP address. You should then use the “curl” command to verify that you can connect to the LXC container. In the same terminal as you listed your containers, try to run <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">http://[YOUR_IP_ADDRESS]:8000/docs</span></code> (for instance <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">http://192.168.0.174:8000/docs</span></code>). If Chap Core is running correctly, you should, in response, get some HTML swagger content.</p>
<p>Next, verify if you can connect to Chap Core from the container you are running DHIS2 by executing this container and using the curl command (for instance <code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">http://192.168.0.174:8000/docs</span></code>).</p>
</section>
<section id="install-the-dhis2-modeling-app">
<h2>Install the DHIS2 Modeling App<a class="headerlink" href="#install-the-dhis2-modeling-app" title="Link to this heading">¶</a></h2>
<p>Go into <strong>App Management</strong> in your DHIS2 instance, and install the <a class="reference external" href="https://apps.dhis2.org/app/a29851f9-82a7-4ecd-8b2c-58e0f220bc75">Modeling App</a></p>
</section>
<section id="route-api">
<h2>Route API<a class="headerlink" href="#route-api" title="Link to this heading">¶</a></h2>
<p>The newer version of DHIS2 supports a built-in reverse proxy named <a class="reference external" href="https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-242/route.html">Routes API</a>. This means you could use the DHIS2 backend to forward a request (typically sent from a frontend application) to another IP address (in our case the Chap Core). To use the Route API (the reverse proxy), we need to configure a “route” in the DHIS2 backend that forwards requests sent from the Modeling App to the Chap Core. First, we create a Route in DHIS2, which means a resource in DHIS2 that holds information about which IP our “route” in DHIS2 should forward requests to.</p>
<p>The Modeling App supports a user interface for creating the needed route, where you only need to specify which IP the request should be forwarded to by the route. To create a new route, it requires you to have the DHIS2 System Administrator Role. In the form where you create the route, you need to speficy the IP adress (for instance <code class="docutils literal notranslate"><span class="pre">http://192.168.0.174/**</span></code>) you located (and verified that was accessible from the DHIS2 container) in the step above.</p>
<p><strong>IMPORTANT:</strong> You need to configure the route as a “wildcard route”, by ending the IP with <code class="docutils literal notranslate"><span class="pre">/**</span></code> More information about Wildcard routes could be found <a class="reference external" href="https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-242/route.html#wildcard-routes">here</a>.</p>
<p><strong>IMPORTANT:</strong> If you are on version v42 and higher by default the routes will only work for https hosts. If you are using chap in a internal network with SSL, you need to allow http routes to created. More information can be found <a class="reference external" href="https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-242/route.html#required-permissions">here</a>. For testing purposes using <code class="docutils literal notranslate"><span class="pre">route.remote_servers_allowed=http://*</span></code> in your <code class="docutils literal notranslate"><span class="pre">dhis.conf</span></code> should give you the old behavior.</p>
</section>
<section id="verifying-the-route-is-working-in-the-modeling-app">
<h2>Verifying the route is working in the Modeling App<a class="headerlink" href="#verifying-the-route-is-working-in-the-modeling-app" title="Link to this heading">¶</a></h2>
<p>You could now go to the Settings page in the Modeling App and verify if the Modeling App can connect to Chap Core. If not, check if the IP address configured in the route is correct and corresponds with the IP you used when you tried to connect to Chap Core from the container you are running DHIS2 in.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../external_models/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Documentation for model developers</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installing Chap Core for use with the Modeling app</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; CHAP
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Configure DHIS2 Modeling App and Chap Core to work together</a><ul>
<li><a class="reference internal" href="#recommendation-around-containerization">Recommendation around containerization</a></li>
<li><a class="reference internal" href="#lxc-container-setup">LXC container setup</a></li>
<li><a class="reference internal" href="#clone-the-chap-core-repo-into-your-lxc-container">Clone the Chap Core repo into your LXC container</a></li>
<li><a class="reference internal" href="#identify-the-chap-core-server-private-ip-address-and-verify-chap-core-is-running-properly">Identify the Chap Core server private IP address and verify Chap Core is running properly</a></li>
<li><a class="reference internal" href="#install-the-dhis2-modeling-app">Install the DHIS2 Modeling App</a></li>
<li><a class="reference internal" href="#route-api">Route API</a></li>
<li><a class="reference internal" href="#verifying-the-route-is-working-in-the-modeling-app">Verifying the route is working in the Modeling App</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=fc837d61"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>